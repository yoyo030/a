(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0131dd48"],{"56c3":function(t,e,s){"use strict";s.r(e);s("14d9");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex justify-content-center w100"},[e("div",{staticClass:"w100 leftSection"},[e("NavBar")],1),e("div",{staticClass:"w100 centerSection"},[e("div",{staticClass:"reply-list-top d-flex align-items-center"},[e("img",{staticClass:"back-icon cursor-pointer",attrs:{src:s("ae5c"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.push({path:"/home"})}}}),e("h4",{staticClass:"setting-title reply-main-title"},[t._v("推文")])]),e("Replies",{key:t.key,attrs:{"initial-tweet":t.tweet}})],1),e("div",{staticClass:"w100 rightSection"},[e("RecommandedList")],1)])},i=[],r=(s("d9e2"),s("d000")),c=s("8fd6"),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply-tweet-container"},[e("div",{staticClass:"reply-tweet-box"},[e("div",{staticClass:"reply-tweet-title d-flex"},[e("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(t.tweet.User.avatar),alt:""}}),e("span",{staticClass:"info"},[null!=t.tweet.User?e("div",{staticClass:"name"},[t._v(" "+t._s(t.tweet.User.name)+" ")]):t._e(),null!=t.tweet.User?e("div",{staticClass:"account"},[t._v(" "+t._s(t._f("addPrefix")(t.tweet.User.account))+" ")]):t._e()])]),e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"tweet-list-contentText"},[t._v(t._s(t.tweet.description))])]),e("div",{staticClass:"reply-tweet-date"},[t._v(" "+t._s(t._f("replyListTime")(t.tweet.createdAt))+" ")]),e("div",{staticClass:"line"}),e("div",{staticClass:"reply-action-amount d-flex"},[e("div",{staticClass:"amount number-font d-flex"},[t._v(" "+t._s(""+t.tweet.replyCount)+" "),e("p",[t._v("回覆")])]),e("div",{staticClass:"amount number-font d-flex"},[t._v(" "+t._s(t.tweet.likeCount)+" "),e("p",[t._v("喜歡次數")])])]),e("div",{staticClass:"reply-action d-flex"},[e("img",{staticClass:"reply-reply-icon cursor-pointer",attrs:{src:s("8e95")},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openModal(t.tweet)}}}),t.tweet.isLike?e("img",{staticClass:"reply-like-icon cursor-pointer",attrs:{src:s("8f77"),alt:""},on:{click:function(e){return t.unlike(t.tweet)}}}):e("img",{staticClass:"reply-like-icon cursor-pointer",attrs:{src:s("0c40"),alt:""},on:{click:function(e){return t.like(t.tweet)}}})])]),e("div",{staticClass:"tweet-reply-list scrollbar"},[t._l(t.tweet.reply,(function(s){return e("div",{key:s.id,staticClass:"reply d-flex"},[e("img",{staticClass:"user-img",attrs:{src:t._f("emptyImage")(s.User.avatar),alt:""}}),e("div",{staticClass:"reply-list-text d-flex flex-column"},[e("div",{staticClass:"tweet-list-tweet-top d-flex align-items-center"},[e("router-link",{attrs:{to:{name:"user-profile",params:{id:s.User.id}}}},[e("div",{staticClass:"tweet-user-name"},[t._v(" "+t._s(s.User.name)+" ")])]),e("div",{staticClass:"tweet-user-account"},[t._v(" "+t._s(t._f("addPrefix")(s.User.account))+" ")]),e("span",[t._v("・")]),e("div",{staticClass:"tweet-user-createdAt"},[t._v(" "+t._s(t._f("fromNow")(s.createdAt))+" ")])],1),e("div",{staticClass:"tweet-account"},[e("span",{staticClass:"reply-span"},[t._v("回覆")]),t._v(" "+t._s(t._f("addPrefix")(t.tweet.User.account))+" ")]),e("div",{staticClass:"tweet-contentText"},[t._v(" "+t._s(s.comment)+" ")])])])})),t.show?e("ReplyModal",{key:t.tweetKey,attrs:{tweet:t.tweet},on:{close:t.closeModal}}):t._e()],2)])},l=[],o=s("2708"),d=s("2797"),u=s("7696"),w=s("2fa3"),p=s("2f62"),f={name:"ReplyList",mixins:[o["b"],o["a"]],props:{initialTweet:{type:Object,required:!0}},components:{ReplyModal:d["a"]},data(){return{tweet:this.initialTweet,show:!1}},filters:{addPrefix(t){return t?"@"+t:"未提供帳號資訊"}},methods:{openModal(t){this.tweet=t,this.tweetKey=this.tweetKey+1,this.show=!0},closeModal(){this.show=!1},async like(t){try{t.isLike=!0;const e=await u["a"].likeTweets(this.currentUser.id,t.id),s=e.data;if(s.status&&"success"!==s.status)throw new Error(s.message);t.likeCount=t.likeCount+1,w["a"].fire({icon:"success",title:"按讚成功!"})}catch(e){console.log(e),w["a"].fire({icon:"warning",title:e.message})}},async unlike(t){try{t.isLike=!1;const e=await u["a"].unlikeTweets(this.currentUser.id,t.id),s=e.data;if(s.status&&"success"!==s.status)throw new Error(s.message);t.likeCount=t.likeCount-1,w["a"].fire({icon:"success",title:"成功收回讚!"})}catch(e){console.log(e),w["a"].fire({icon:"warning",title:e.message})}}},computed:{...Object(p["b"])(["currentUser","isAuthenticated"])}},m=f,v=(s("f1f9"),s("2877")),C=Object(v["a"])(m,n,l,!1,null,"d494ce10",null),A=C.exports,y={name:"ReplyList",components:{NavBar:r["a"],RecommandedList:c["a"],Replies:A},data(){return{tweet:{},key:0}},created(){this.fetchTweets()},methods:{async fetchTweets(){try{const t=await u["a"].getTweet(this.$route.params.id),e=t.data;if(console.log(e),e.status&&"success"!==e.status)throw new Error(e.message);this.tweet=e}catch(t){console.log(t),w["a"].fire({icon:"warning",title:"資料載入失敗 !"})}try{const t=await u["a"].getTweetReplies(this.$route.params.id),e=t.data;if(console.log(e),e.status&&"success"!==e.status)throw new Error(e.message);this.tweet.reply=e}catch(t){console.log(t)}this.key=this.key+1}}},g=y,h=Object(v["a"])(g,a,i,!1,null,null,null);e["default"]=h.exports},ae5c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB6SURBVHgB7ZfBCYAwDEW/TuAIbtZsnhHaDTSBCir1oEJy+Q9e6fFBCqHAe8SsppoFSYi5naxIQG4RriIYGUS4oaMRRjCCEYz4GBGlmmXqlxW5tNmOBfk0PwS5o/ENXo6ip5jQx8oYxjCGMZkxKf+aUYwiEekBlx3xlx0JyMM9ap/GrgAAAABJRU5ErkJggg=="},f1f9:function(t,e,s){"use strict";s("f9ea")},f9ea:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0131dd48.ef2daf4c.js.map